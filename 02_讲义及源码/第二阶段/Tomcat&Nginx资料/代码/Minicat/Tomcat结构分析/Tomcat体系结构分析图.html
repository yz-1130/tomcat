<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.3.3 (459821)"/><meta name="author" content="yanless"/><meta name="created" content="2020-05-01 15:23:24 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2020-05-01 15:56:42 +0000"/><title>Tomcat体系结构分析图</title></head><body><div><br/></div><div>tomcat中装有应用的很多Java实现类，用户通过http请求进来，🈶️tomcat通过不同的加载器加载不同的java类，以应对不同的请求。垃圾回收算法一般是G1。</div><div>http服务器接收到请求之后，会把请求交给tomcat的servlet容器处理，然后servlet通过servlet接口来调用不同的业务实现类。其中Servlet接口和Servlet容器这一整套内容叫做Servlet规范</div><div><br/></div><div>因此Tomcat具有两个不同的身份：http服务器、servlet容器</div><div>其中作为http服务器一般通过https协议传输数据；即http+ssl。其中信任证书由专业机构颁发，亦可以jdk自己生成玩自己的。</div><div><img src="Tomcat%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90%E5%9B%BE.resources/48BA5AE0-B8E2-4205-97CC-BBFCD002161E.png" height="906" width="1762"/></div><div><br/></div><div>Tomcat核心组件</div><div>1.连接器（负责和客户端通信，将字节流及请求对象做转换）<span>    </span></div><div><span><span>    （1）Coyote</span><br/></span></div><div>2.容器 （负责内部处理，Servlet的加载，具体业务调用的实现）</div><div><span>    （1）</span>Catalina （这玩意儿是tomcat的核心，tomcat本质就是一个servlet容器，通过一系列配置文件来玩的）</div><div><br/></div><div>如下图：<br/></div><div>tomcat启动时就是在初始化一个Catalina实例，通过加载server.xml完成其它实例的创建。（Catalina基本就是用来负责解析配置文件server.xml的）</div><div>首先创建并管理一个server—》对应配置文件的server</div><div>其次一个server下面可以有很多个服务，对应多个请求</div><div>每一个请求对应多个Connector和一个Containner</div><div><img src="Tomcat%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90%E5%9B%BE.resources/79BB321E-09CE-4CB1-B646-70B5B36BB1D8.png" height="866" width="1404"/></div><div><br/></div><div><br/></div><div>所谓Container组件 它包含以下几种具体的组件 分别是：Engine、Host、Context、Wrapper</div><div>Engine：引擎-》表示整个Catalina的Servlet引擎，一个独立的service最多只能有一个Engine，但是可以对应多个Host</div><div>Host：代表一个具体的虚拟主机，可以配置多个</div><div><br/></div><div>Context：代表Web应用程序，可以包含多个Wragger</div><div><br/></div><div>Wrapper：即是一个Servlet，是容器最底端的玩意儿，肚子里没有其它的崽儿了</div><div><br/></div><div>以上所有都在配置文件server.xml中体现。</div><div>Tomcat体系结构的六个主要概念</div><div>1.Server</div><div>   server代表整个容器（Container）它可以包含一个或多个Service</div><div>2.Service</div><div>3.Engine</div><div>4.Host</div><div>5.Connector</div><div>6.Context</div><div>tomcat体系结构图</div><div><br/></div><div><img src="Tomcat%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90%E5%9B%BE.resources/1BAB255B-2893-4356-B6F8-9479D1F6CE78.png" height="998" width="1574"/></div><div><br/></div><div><br/></div></body></html>